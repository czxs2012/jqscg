class Ticket{constructor(a,b,c,d,e){this.elQb=a,this.elWjd=b,this.elYjd=c,this.elXxjm=d,this.img=e,this.msgQb=[],this.msgWjd=[],this.msgYjd=[]}init(a){if($(this.elQb).find(".scTicket").remove(),$(this.elWjd).find(".scTicket").remove(),$(this.elYjd).find(".scTicket").remove(),a)switch(!0){case a instanceof Array:this.msgQb=a,this.msgQb.forEach(a=>{this.ticketTemplate(this.elQb,a)}),this.msgQb.filter(a=>{"\u672A\u7ED3\u5355"==a.jdzt&&(this.msgWjd.push(a),this.ticketTemplate(this.elWjd,a))}),this.msgQb.filter(a=>{"\u5DF2\u7ED3\u5355"==a.jdzt&&(this.msgYjd.push(a),this.ticketTemplate(this.elYjd,a))});break;case a instanceof Object:for(var b in this.msgQb=[],a)this.msgQb.push(a[b]);;this.msgQb.forEach(a=>{this.ticketTemplate(this.elQb,a)}),this.msgQb.filter(a=>{"\u672A\u7ED3\u5355"==a.jdzt&&(this.msgWjd.push(a),this.ticketTemplate(this.elWjd,a))}),this.msgQb.filter(a=>{"\u5DF2\u7ED3\u5355"==a.jdzt&&(this.msgYjd.push(a),this.ticketTemplate(this.elYjd,a))});}}initQb(a){if($(this.elQb).find(".scTicket").remove(),a)switch(!0){case a instanceof Array:a.forEach(a=>{this.ticketTemplate(this.elQb,a)});break;case a instanceof Object:for(var b in a)this.ticketTemplate(this.elQb,a[b]);;}}initWjd(a){if($(this.elWjd).find(".scTicket").remove(),a)switch(!0){case a instanceof Array:a.filter(a=>{"\u672A\u7ED3\u5355"==a.jdzt&&this.ticketTemplate(this.elWjd,a)});break;case a instanceof Object:for(var b in a)"\u672A\u7ED3\u5355"==a[b].jdzt&&this.ticketTemplate(this.elWjd,a[b]);;}}initYjd(a){if($(this.elYjd).find(".scTicket").remove(),a)switch(!0){case a instanceof Array:a.filter(a=>{"\u5DF2\u7ED3\u5355"==a.jdzt&&this.ticketTemplate(this.elYjd,a)});break;case a instanceof Object:for(var b in a)"\u5DF2\u7ED3\u5355"==a[b].jdzt&&this.ticketTemplate(this.elYjd,a[b]);;}}eventRegister(){var a=this;$(".scqkBox").off().on("click",".queding",function(){$(".xxjmBox").css("display","none")}),$(this.elQb).off().on("click",".scTicket",function(){$(".xxjmBox").css("display","flex");var b=$(this).index();a.xxjmTemplate(a.msgQb[b])}),$(this.elWjd).off().on("click",".scTicket",function(){$(".xxjmBox").css("display","flex");var b=$(this).index();a.xxjmTemplate(a.msgWjd[b])}),$(this.elYjd).off().on("click",".scTicket",function(){$(".xxjmBox").css("display","flex");var b=$(this).index();a.xxjmTemplate(a.msgYjd[b])})}animate(b,c){var d=Math.PI,e=-5,f=b.getContext("2d"),g=b.width/2,h=b.height/2+11,i=setInterval(()=>(e+=1,e>c/5-5)?void clearInterval(i):void(f.beginPath(),f.strokeStyle="#43b1df",f.lineWidth=2,f.arc(g,h,15,-.5*d,d*(e/10)),f.fillStyle="#000000",f.font="12px,\u9ED1\u4F53",f.fillText(c+"%",g-11,h+5),f.stroke()),25)}animate2(b,c){var d=Math.PI,e=-5,f=b.width,g=b.height,h=b.getContext("2d"),i=setInterval(function(){return e+=1,e>c/5-5?(clearInterval(i),h.beginPath(),h.fillStyle="#43b1df",h.font=.07*f+"px \u9ED1\u4F53",void h.fillText(c+"%",.5*f-.2*f,.5*g-.28*g)):void(h.beginPath(),h.lineWidth=2,h.moveTo(.55*f,.5*g),h.arc(.55*f,.5*g,.2*f,-.5*d,d*(e/10)),h.fillStyle="#43b1df",h.fill(),h.beginPath(),h.fillStyle="#43b1df",h.font=.06*f+"px \u9ED1\u4F53",h.fillText("\u751F\u4EA7\u8FDB\u5EA6",.5*f-.45*f,.5*g-.28*g),h.beginPath(),h.strokeStyle="#AAAAAA",h.lineWidth=1,h.moveTo(.5*f-.1*f,.5*g-.1*g),h.lineTo(.5*f-.2*f,.5*g-.1*g),h.lineTo(.5*f-.2*f-.08*f,.5*g-.2*g),h.stroke())},25)}}Ticket.prototype.ticketTemplate=function(a,b){var c=document.createElement("div");c.classList.add("scTicket"),c.innerHTML=`
		<div class="floorUp">
			<div class="box1">
				<div><img src="${this.img}icon-zt.png" alt="">${b.jdzt}</div>
			</div>
			<div class="box2">
				<img src="${this.img}icon-khmz.png" alt="" class="khimg">
				<div class="scKhMc">${b.khmc}</div>
			</div>
			<div class="box3">
				<div class="box3_1">
					<div><img src="${this.img}icon-pm.png" alt="">品名</div>
					<div class="scPm">${b.pm}</div>
				</div>
				<div class="box3_2">
					<div><img src="${this.img}icon-dh.png" alt="">订单单号</div>
					<div class="scDh">${b.dddh}</div>
				</div>
			</div>
		</div>
		<div class="floorDown">
			<div class="lsh">
				<div>
					<img src="${this.img}icon-lsh.png" alt="">
					流水号
				</div>
				<div>${b.lsh}</div>
			</div>
			<div class="scRq">
				<div><img src="${this.img}icon-date.png" alt="">日期</div>
				<div>${b.rq}</div>
			</div>
		</div>
	`,a.appendChild(c);var d=document.createElement("canvas");$(c).find(".box1").append(d),d.width=$(c).find(".box1").width()/4,d.height=$(c).find(".box1").height(),c.style.display="none",$(c).slideDown(()=>{setTimeout(()=>{this.animate(d,b.scjd)},100)})},Ticket.prototype.xxjmTemplate=function(a){var b=document.createElement("ul");b.innerHTML=`
						<li class="khxxbox">
							<div class="khxx">
								<div>客户：</div>
								<div>${a.khmc}</div>
							</div>
							<div class="khxx">
								<div>日期：</div>
								<div>${a.rq}</div>
							</div>
							<div class="khxx">
								<div>开单单号：</div>
								<div>${a.kddh}</div>
							</div>
							<div class="khxx">
								<div>订单单号：</div>
								<div>${a.dddh}</div>
							</div>
						</li>
						<li class="pmxxBox">
							<div class="pmxx"><span>品名：</span>${a.pm}</div>
							<div class="pmxx"><span>流水号：</span>${a.lsh}</div>
							<div class="pmxx"><span>编号：</span>${a.bh}</div>
							<div class="pmxx"><span>颜色：</span>${a.ys}</div>
							<div class="pmxx"><span>规格：</span>${a.gg}</div>
							<div class="pmxx"><span>单位：</span>${a.dw}</div>
							<div class="pmxx"><span>生产匹数：</span>${a.scps}</div>
							<div class="pmxx"><span>生产重量：</span>${a.sczl}</div>
							<div class="pmxx"><span>入库匹数：</span>${a.rkps}</div>
							<div class="pmxx"><span>入库重量：</span>${a.rkzl}</div>
							<div class="pmxx"><span>未入匹数：</span>${a.wrps}</div>
							<div class="pmxx"><span>未入重量：</span>${a.wrzl}</div>
						</li>
						<li class="jdztbox">
							<div>${a.jdzt}</div>
							<div >
							</div>
							
						</li>
						<li class="queding">确定</li>
					`,$(this.elXxjm).find("ul").remove(),this.elXxjm.appendChild(b);var c=document.createElement("canvas");c.width=.95*$(b).find("li:eq(2) div:eq(1)").width(),c.height=$(b).find("li:eq(2) div:eq(1)").height(),$(b).find("li:eq(2) div:eq(1)").append(c),setTimeout(()=>{this.animate2(c,a.scjd)},200)};function ztEventRegister(a,b,c,d,e){$(".scqkQb").off().click(function(){$(this).addClass("scqkZtActive").siblings().removeClass("scqkZtActive").siblings(".scqkZtXzHk").stop().animate({left:"0%"},200),$("#quanbu").css("z-index","11").stop().animate({left:"0"},()=>{$("#quanbu").siblings().css("left","100%").siblings().css("z-index","10")}),$(".scqkMzSx").val(""),$(".scTicket").remove(),addTicket.init(a)}),$(".scqkWjd").off().click(function(){$(this).addClass("scqkZtActive").siblings().removeClass("scqkZtActive").siblings(".scqkZtXzHk").stop().animate({left:"33.333333%"},200),$("#scqkWjd").css("z-index","11").stop().animate({left:"0"},()=>{$("#scqkWjd").siblings().css({left:"100%"}).siblings().css("z-index","10")}),$(".scqkMzSx").val(""),$(".scTicket").remove(),addTicket.initWjd(a)}),$(".scqkYjd").off().click(function(){$(this).addClass("scqkZtActive").siblings().removeClass("scqkZtActive").siblings(".scqkZtXzHk").stop().animate({left:"66.666666%"},200),$("#scqkYjd").css("z-index","11").stop().animate({left:"0"},()=>{$("#scqkYjd").siblings().css({left:"100%"}).siblings().css("z-index","10")}),$(".scqkMzSx").val(""),$(".scTicket").remove(),addTicket.initYjd(a)}),$(".scqkMzSx").off().on("input",function(){if(a instanceof Object){var b=[];for(var c in a)b.push(a[c])}var d=b.filter(function(a){if(a.khmc.includes($(".scqkMzSx").val()))return a});switch(!0){case $(".scqkQb ").hasClass("scqkZtActive"):$("#quanbu").find(".scTicket").remove(),addTicket.initQb(d);break;case $(".scqkWjd").hasClass("scqkZtActive"):$("#scqkWjd").find(".scTicket").remove(),addTicket.initWjd(d);break;case $(".scqkYjd").hasClass("scqkZtActive"):$("#scqkYjd").find(".scTicket").remove(),addTicket.initYjd(d);}}),$(".scqkJt").off().click(function(){$(this).siblings().removeClass("rqActive").siblings(".rqhk").stop().animate({left:"0%"},200,()=>{$(this).addClass("rqActive")}),$.ajax({type:b.type,url:b.url,data:b.data,dataType:b.dataType,success:b.success,error:b.error})}),$(".scqkJt").click(),$(".scqkZt").off().click(function(){$(this).siblings().removeClass("rqActive").siblings(".rqhk").stop().animate({left:"25%"},200,()=>{$(this).addClass("rqActive")}),$.ajax({type:c.type,url:c.url,data:c.data,dataType:c.dataType,success:c.success,error:c.error})}),$(".scqkBz").off().click(function(){$(this).siblings().removeClass("rqActive").siblings(".rqhk").stop().animate({left:"50%"},200,()=>{$(this).addClass("rqActive")}),$.ajax({type:d.type,url:d.url,data:d.data,dataType:d.dataType,success:d.success,error:d.error})}),$(".scqkGd").off().click(function(){var a,b=this;Array.prototype.forEach.call($(this).siblings(),b=>{$(b).hasClass("rqActive")&&(a=b)}),$(this).siblings().removeClass("rqActive").siblings(".rqhk").stop().animate({left:"75%"},200,()=>{$(this).addClass("rqActive"),$(".dateSelect").css("display","flex")}),$(".dateBox .confirm").off().click(function(){if(""==$(".startDay").val()&&""==$(".endDay").val()||""!=$(".startDay").val()&&""==$(".endDay").val())return void alert("\u8BF7\u8F93\u5165\u6B63\u786E\u65E5\u671F");$.ajax({type:e.type,url:e.url,data:e.data,dataType:e.dataType,success:e.success,error:e.error}),$(".dateSelect").css("display","none")}),$(".dateBox .cancel").off().click(function(){(""==$(".startDay").val()&&""==$(".endDay").val()||""!=$(".endDay").val())&&$(a).click();$(".dateSelect").css("display","none")})})}